Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();exports.parseSelector=parseSelector;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Selector=exports.Selector=function(){function Selector(){_classCallCheck(this,Selector);this.subSelectors=[];this.name=undefined;this.specificity=0;}_createClass(Selector,[{key:'addSimpleSelector',value:function addSimpleSelector(sel){this.subSelectors.push(sel);this.name=sel.getName();var specificity=0;for(var i=0;i<this.subSelectors.length;++i){specificity+=this.subSelectors[i].getSpecificity();}this.specificity=specificity;}},{key:'getName',value:function getName(){return this.name;}},{key:'getSpecificity',value:function getSpecificity(){return this.specificity;}},{key:'matchContext',value:function matchContext(node){var curNode=node;if(curNode!==undefined){var subSelectors=this.subSelectors;var j=subSelectors.length-1;while(curNode&&j>=0){if(subSelectors[j].matchContext(curNode))--j;curNode=curNode.parent;}if(j===-1)return true;}return false;}},{key:'toString',value:function toString(){return this.subSelectors.map(function(s){return s.toString();}).join(' ');}}]);return Selector;}();var SimpleSelector=exports.SimpleSelector=function(){function SimpleSelector(name,variants){_classCallCheck(this,SimpleSelector);this.name=name;this.variants=variants;var sc=variants===undefined?0:variants.length;var sd=1;this.specificity=(sc<<8)+sd;}_createClass(SimpleSelector,[{key:'getName',value:function getName(){return this.name;}},{key:'getSpecificity',value:function getSpecificity(){return this.specificity;}},{key:'matchContext',value:function matchContext(node){if(this.name!==node.getName())return false;if(this.variants!==undefined){var nodeVariants=node.getVariants();if(nodeVariants===undefined)return false;if(typeof nodeVariants==='string'){if(this.variants.length!==1)return false;if(this.variants[0]!==nodeVariants)return false;}else{for(var i=0;i<this.variants.length;++i){if(!nodeVariants.includes(this.variants[i]))return false;}}}return true;}},{key:'toString',value:function toString(){if(this.variants===undefined){return this.name;}else{return this.name+'.'+this.variants.join('.');}}}]);return SimpleSelector;}();function parseSelector(value){if(value.indexOf(' ')===-1){return parseSimpleSelector(value);}else{return parseCompoundSelector(value);}}function parseSimpleSelector(value){var dotPos=value.indexOf('.');if(dotPos===-1){return new SimpleSelector(value);}else{return new SimpleSelector(value.slice(0,dotPos),value.slice(dotPos+1).split('.'));}}function parseCompoundSelector(value){var s=new Selector();var chunks=value.split(/\s+/);for(var i=0;i<chunks.length;++i){s.addSimpleSelector(parseSimpleSelector(chunks[i]));}return s;}