Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _miniSignals=require('./mini-signals');function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Node=function(){function Node(name,props,parent,styleSheet){_classCallCheck(this,Node);this.name=name;this.props=props;this.childProps=undefined;this.variant=props&&props.variant;this.parent=parent;this.styleSheet=styleSheet;this.changed=new _miniSignals.Signal();this.parentSubscription=undefined;this.changeCb=undefined;}_createClass(Node,[{key:'getChildProps',value:function getChildProps(){this.resolveChildProps();return this.childProps;}},{key:'getName',value:function getName(){return this.name;}},{key:'getParent',value:function getParent(){return this.parent;}},{key:'getStyleSheet',value:function getStyleSheet(){return this.styleSheet;}},{key:'getVariants',value:function getVariants(){return this.variant;}},{key:'subscribe',value:function subscribe(cb){this.changeCb=cb;if(this.parent!==undefined){this.parentSubscription=this.parent.changed.add(this.parentChanged,this);}}},{key:'parentChanged',value:function parentChanged(){this.update();}},{key:'setProps',value:function setProps(nextProps){this.props=nextProps;this.variant=nextProps.variant;this.update();}},{key:'update',value:function update(){this.resolveChildProps();if(this.changeCb)this.changeCb();}},{key:'resolveChildProps',value:function resolveChildProps(){var childProps=this.styleSheet.getProps(this);delete childProps.variant;this.childProps=childProps;}},{key:'dispose',value:function dispose(){if(this.parentSubscription!==undefined){this.parentSubscription.detach();this.parentSubscription=undefined;}this.changed.detachAll();}}]);return Node;}();exports.default=Node;